<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Color Code Game</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div id="start-screen" class="start-container">
        <h1>üéÆ Color Code Game</h1>

        <div class="button-row">
            <button id="start-btn">Start Game</button>
        </div>

        <div class="button-row">
            <button id="rules-btn">Rules</button>
        </div>

        <div class="button-row">
            <label class="checkbox-label">
                <input type="checkbox" id="allow-duplicates" />
                Allow Duplicates
            </label>
        </div>
    </div>

    <div id="game" class="hidden">
        <div id="color-blocks">
            <h3>üé® Drag a Color</h3>
            <div class="color-row">
                <div class="peg" data-color="red" draggable="true"></div>
                <div class="peg" data-color="orange" draggable="true"></div>
                <div class="peg" data-color="yellow" draggable="true"></div>
                <div class="peg" data-color="pink" draggable="true"></div>
            </div>
            <div class="color-row">
                <div class="peg" data-color="green" draggable="true"></div>
                <div class="peg" data-color="black" draggable="true"></div>
                <div class="peg" data-color="purple" draggable="true"></div>
                <div class="peg" data-color="white" draggable="true"></div>
            </div>
        </div>

        <div id="random-color"></div> 

        <div id="board" class="board"></div>

        <div class="controls">
            <button id="check-btn">Check</button>
            <button id="newgame-btn">New Game</button>
        </div>

        <div id="message" class="message"></div>
    </div>

    <div id="win-popup" class="popup hidden">
        <div class="popup-content">
            <h2>üéâ You Win!</h2>
            <div id="stars"></div>
            <p id="score"></p>
            <p id="score-level"></p> 
            <button onclick="initGame(true)">Play Again</button>
        </div>
    </div>

    <div id="lose-popup" class="popup hidden">
        <div class="popup-content">
            <h2>üòû You Lose!</h2>
            <p id="lose-message"></p>
            <div class="secret-code-display">
                <p>The code was:</p>
                <div id="final-secret-code" class="slots-container">
                    </div>
            </div>
            <button onclick="initGame(true)">Try Again</button>
        </div>
    </div>

    <div id="error-popup" class="popup hidden">
        <div class="popup-content">
            <p id="error-message"></p>
            <button onclick="hideErrorPopup()">OK</button> 
        </div>
    </div>

    <div id="rules-popup" class="popup hidden">
        <div class="popup-content">
            <h2 class="rules-heading">How to Play Mastermind</h2>
            <button class="close-rules-btn" onclick="hideRulesPopup()">‚úñ</button>
            <div class="rules-text">
                <p><strong>1. Goal:</strong> Guess the secret code of 4 colors generated by the computer.</p>
                <p><strong>2. Making a Guess:</strong> Drag colors from the palette to fill the four slots in the current guess row.</p>
                <p><strong>3. Checking Your Guess:</strong> Click the 'Check' button to submit your combination.</p>
                <p><strong>4. Feedback Pegs:</strong></p>
                <ul>
                    <li><span class="feedback-example red-peg"></span> A color is correct AND in the correct position.</li>
                    <li><span class="feedback-example white-peg"></span> A color is correct BUT in the wrong position.</li>
                    <li><span class="feedback-example black-peg"></span> A color is NOT in the secret code at all.</li>
                </ul>
                <p><strong>5. Duplicates:</strong> You can choose whether to allow duplicate colors in the secret code using the 'Allow Duplicates' toggle on the start screen.</p>
                <p><strong>6. Winning:</strong> You win by correctly guessing all 4 colors in the correct order (all red pegs).</p>
                <p><strong>7. Losing:</strong> You have 10 tries. If you can't crack the code within 10 attempts, it's game over!</p>
                <p class="good-luck">Good luck and have fun! üëç</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>